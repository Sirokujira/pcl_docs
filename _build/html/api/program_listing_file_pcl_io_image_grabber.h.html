

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Program Listing for File image_grabber.h &mdash; pcl 1.9.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/modified_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="File image_ir.h" href="file_pcl_io_image_ir.h.html" />
    <link rel="prev" title="File image_grabber.h" href="file_pcl_io_image_grabber.h.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> pcl
          

          
          </a>

          
            
            
              <div class="version">
                1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Library API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pcl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Library API</a> &raquo;</li>
        
          <li><a href="file_pcl_io_image_grabber.h.html">File image_grabber.h</a> &raquo;</li>
        
      <li>Program Listing for File image_grabber.h</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/program_listing_file_pcl_io_image_grabber.h.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="program-listing-for-file-image-grabber-h">
<span id="program-listing-file-pcl-io-image-grabber-h"></span><h1>Program Listing for File image_grabber.h<a class="headerlink" href="#program-listing-for-file-image-grabber-h" title="Permalink to this headline">¶</a></h1>
<p>↰ <a class="reference internal" href="file_pcl_io_image_grabber.h.html#file-pcl-io-image-grabber-h"><span class="std std-ref">Return to documentation for file</span></a> (<code class="docutils literal notranslate"><span class="pre">pcl\io\image_grabber.h</span></code>)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * Software License Agreement (BSD License)</span>
<span class="cm"> *</span>
<span class="cm"> *  Point Cloud Library (PCL) - www.pointclouds.org</span>
<span class="cm"> *  Copyright (c) 2010-2011, Willow Garage, Inc.</span>
<span class="cm"> *  Copyright (c) 2012-, Open Perception, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *  All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> *  Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> *  modification, are permitted provided that the following conditions</span>
<span class="cm"> *  are met:</span>
<span class="cm"> *</span>
<span class="cm"> *   * Redistributions of source code must retain the above copyright</span>
<span class="cm"> *     notice, this list of conditions and the following disclaimer.</span>
<span class="cm"> *   * Redistributions in binary form must reproduce the above</span>
<span class="cm"> *     copyright notice, this list of conditions and the following</span>
<span class="cm"> *     disclaimer in the documentation and/or other materials provided</span>
<span class="cm"> *     with the distribution.</span>
<span class="cm"> *   * Neither the name of the copyright holder(s) nor the names of its</span>
<span class="cm"> *     contributors may be used to endorse or promote products derived</span>
<span class="cm"> *     from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="cm"> *  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="cm"> *  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span>
<span class="cm"> *  FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span>
<span class="cm"> *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<span class="cm"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span>
<span class="cm"> *  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<span class="cm"> *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<span class="cm"> *  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<span class="cm"> *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span>
<span class="cm"> *  ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="cm"> *  POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#pragma once</span>

<span class="cp">#include</span> <span class="cpf">&quot;pcl/pcl_config.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pcl/io/grabber.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pcl/io/file_grabber.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pcl/common/time_trigger.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;pcl/conversions.h&gt;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">pcl</span>
<span class="p">{</span>
  <span class="cm">/** \brief Base class for Image file grabber.</span>
<span class="cm">   * \ingroup io</span>
<span class="cm">   */</span>
  <span class="k">class</span> <span class="nc">PCL_EXPORTS</span> <span class="nl">ImageGrabberBase</span> <span class="p">:</span> <span class="k">public</span> <span class="n">Grabber</span>
  <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="cm">/** \brief Constructor taking a folder of depth+[rgb] images.</span>
<span class="cm">     * \param[in] directory Directory which contains an ordered set of images corresponding to an [RGB]D video, stored as TIFF, PNG, JPG, or PPM files. The naming convention is: frame_[timestamp]_[&quot;depth&quot;/&quot;rgb&quot;].[extension]</span>
<span class="cm">     * \param[in] frames_per_second frames per second. If 0, start() functions like a trigger, publishing the next PCD in the list.</span>
<span class="cm">     * \param[in] repeat whether to play PCD file in an endless loop or not.</span>
<span class="cm">     * \param pclzf_mode</span>
<span class="cm">     */</span>
    <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">directory</span><span class="p">,</span> <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">repeat</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">pclzf_mode</span><span class="p">);</span>

    <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">depth_directory</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">rgb_directory</span><span class="p">,</span> <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">repeat</span><span class="p">);</span>
    <span class="cm">/** \brief Constructor taking a list of paths to PCD files, that are played in the order they appear in the list.</span>
<span class="cm">     * \param[in] depth_image_files Path to the depth image files files.</span>
<span class="cm">     * \param[in] frames_per_second frames per second. If 0, start() functions like a trigger, publishing the next PCD in the list.</span>
<span class="cm">     * \param[in] repeat whether to play PCD file in an endless loop or not.</span>
<span class="cm">     */</span>
    <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">depth_image_files</span><span class="p">,</span> <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">repeat</span><span class="p">);</span>

    <span class="cm">/** \brief Copy constructor.</span>
<span class="cm">     * \param[in] src the Image Grabber base object to copy into this</span>
<span class="cm">     */</span>
    <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="k">const</span> <span class="n">ImageGrabberBase</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span> <span class="o">:</span> <span class="n">impl_</span> <span class="p">()</span>
    <span class="p">{</span>
      <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="n">src</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/** \brief Copy operator.</span>
<span class="cm">     * \param[in] src the Image Grabber base object to copy into this</span>
<span class="cm">     */</span>
    <span class="n">ImageGrabberBase</span><span class="o">&amp;</span>
    <span class="k">operator</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">ImageGrabberBase</span> <span class="o">&amp;</span><span class="n">src</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">impl_</span> <span class="o">=</span> <span class="n">src</span><span class="p">.</span><span class="n">impl_</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/** \brief Virtual destructor. */</span>
    <span class="o">~</span><span class="n">ImageGrabberBase</span> <span class="p">()</span> <span class="k">throw</span> <span class="p">();</span>

    <span class="cm">/** \brief Starts playing the list of PCD files if frames_per_second is &gt; 0. Otherwise it works as a trigger: publishes only the next PCD file in the list. */</span>
    <span class="kt">void</span>
    <span class="nf">start</span> <span class="p">()</span> <span class="k">override</span><span class="p">;</span>

    <span class="cm">/** \brief Stops playing the list of PCD files if frames_per_second is &gt; 0. Otherwise the method has no effect. */</span>
    <span class="kt">void</span>
    <span class="nf">stop</span> <span class="p">()</span> <span class="k">override</span><span class="p">;</span>

    <span class="cm">/** \brief Triggers a callback with new data */</span>
    <span class="k">virtual</span> <span class="kt">void</span>
    <span class="nf">trigger</span> <span class="p">();</span>

    <span class="cm">/** \brief whether the grabber is started (publishing) or not.</span>
<span class="cm">     * \return true only if publishing.</span>
<span class="cm">     */</span>
    <span class="kt">bool</span>
    <span class="nf">isRunning</span> <span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>

    <span class="cm">/** \return The name of the grabber */</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>
    <span class="n">getName</span> <span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>

    <span class="cm">/** \brief Rewinds to the first PCD file in the list.*/</span>
    <span class="k">virtual</span> <span class="kt">void</span>
    <span class="nf">rewind</span> <span class="p">();</span>

    <span class="cm">/** \brief Returns the frames_per_second. 0 if grabber is trigger-based */</span>
    <span class="kt">float</span>
    <span class="nf">getFramesPerSecond</span> <span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>

    <span class="cm">/** \brief Returns whether the repeat flag is on */</span>
    <span class="kt">bool</span>
    <span class="nf">isRepeatOn</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Returns if the last frame is reached */</span>
    <span class="kt">bool</span>
    <span class="nf">atLastFrame</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Returns the filename of the current indexed file */</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>
    <span class="n">getCurrentDepthFileName</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Returns the filename of the previous indexed file</span>
<span class="cm">     *  SDM: adding this back in, but is this useful, or confusing? */</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>
    <span class="n">getPrevDepthFileName</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Get the depth filename at a particular index */</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span>
    <span class="n">getDepthFileNameAtIndex</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">idx</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Query only the timestamp of an index, if it exists */</span>
    <span class="kt">bool</span>
    <span class="nf">getTimestampAtIndex</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">idx</span><span class="p">,</span> <span class="n">pcl</span><span class="o">::</span><span class="kt">uint64_t</span> <span class="o">&amp;</span><span class="n">timestamp</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Manually set RGB image files.</span>
<span class="cm">     * \param[in] rgb_image_files A vector of [tiff/png/jpg/ppm] files to use as input. There must be a 1-to-1 correspondence between these and the depth images you set</span>
<span class="cm">     */</span>
    <span class="kt">void</span>
    <span class="nf">setRGBImageFiles</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">rgb_image_files</span><span class="p">);</span>

    <span class="cm">/** \brief Define custom focal length and center pixel. This will override ANY other setting of parameters for the duration of the grabber&#39;s life, whether by factory defaults or explicitly read from a frame_[timestamp].xml file.</span>
<span class="cm">     *  \param[in] focal_length_x Horizontal focal length (fx)</span>
<span class="cm">     *  \param[in] focal_length_y Vertical focal length (fy)</span>
<span class="cm">     *  \param[in] principal_point_x Horizontal coordinates of the principal point (cx)</span>
<span class="cm">     *  \param[in] principal_point_y Vertical coordinates of the principal point (cy)</span>
<span class="cm">     */</span>
    <span class="k">virtual</span> <span class="kt">void</span>
    <span class="nf">setCameraIntrinsics</span> <span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="n">focal_length_x</span><span class="p">,</span>
                         <span class="k">const</span> <span class="kt">double</span> <span class="n">focal_length_y</span><span class="p">,</span>
                         <span class="k">const</span> <span class="kt">double</span> <span class="n">principal_point_x</span><span class="p">,</span>
                         <span class="k">const</span> <span class="kt">double</span> <span class="n">principal_point_y</span><span class="p">);</span>

    <span class="cm">/** \brief Get the current focal length and center pixel. If the intrinsics have been manually set with setCameraIntrinsics, this will return those values. Else, if start () has been called and the grabber has found a frame_[timestamp].xml file, this will return the most recent values read. Else, returns factory defaults.</span>
<span class="cm">     *  \param[out] focal_length_x Horizontal focal length (fx)</span>
<span class="cm">     *  \param[out] focal_length_y Vertical focal length (fy)</span>
<span class="cm">     *  \param[out] principal_point_x Horizontal coordinates of the principal point (cx)</span>
<span class="cm">     *  \param[out] principal_point_y Vertical coordinates of the principal point (cy)</span>
<span class="cm">     */</span>
    <span class="k">virtual</span> <span class="kt">void</span>
    <span class="nf">getCameraIntrinsics</span> <span class="p">(</span><span class="kt">double</span> <span class="o">&amp;</span><span class="n">focal_length_x</span><span class="p">,</span>
                         <span class="kt">double</span> <span class="o">&amp;</span><span class="n">focal_length_y</span><span class="p">,</span>
                         <span class="kt">double</span> <span class="o">&amp;</span><span class="n">principal_point_x</span><span class="p">,</span>
                         <span class="kt">double</span> <span class="o">&amp;</span><span class="n">principal_point_y</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Define the units the depth data is stored in.</span>
<span class="cm">     *  Defaults to mm (0.001), meaning a brightness of 1000 corresponds to 1 m*/</span>
    <span class="kt">void</span>
    <span class="nf">setDepthImageUnits</span> <span class="p">(</span><span class="kt">float</span> <span class="n">units</span><span class="p">);</span>

    <span class="cm">/** \brief Set the number of threads, if we wish to use OpenMP for quicker cloud population.</span>
<span class="cm">     *  Note that for a standard (&lt; 4 core) machine this is unlikely to yield a drastic speedup.*/</span>
    <span class="kt">void</span>
    <span class="nf">setNumberOfThreads</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr_threads</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">protected</span><span class="o">:</span>
    <span class="cm">/** \brief Convenience function to see how many frames this consists of</span>
<span class="cm">      */</span>
    <span class="kt">size_t</span>
    <span class="n">numFrames</span> <span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="cm">/** \brief Gets the cloud in ROS form at location idx */</span>
    <span class="kt">bool</span>
    <span class="nf">getCloudAt</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">idx</span><span class="p">,</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PCLPointCloud2</span> <span class="o">&amp;</span><span class="n">blob</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector4f</span> <span class="o">&amp;</span><span class="n">origin</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span> <span class="o">&amp;</span><span class="n">orientation</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>


    <span class="k">private</span><span class="o">:</span>
    <span class="k">virtual</span> <span class="kt">void</span>
    <span class="n">publish</span> <span class="p">(</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PCLPointCloud2</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">,</span> <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector4f</span><span class="o">&amp;</span> <span class="n">origin</span><span class="p">,</span> <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="o">&amp;</span> <span class="n">orientation</span><span class="p">)</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


    <span class="c1">// to separate and hide the implementation from interface: PIMPL</span>
    <span class="k">struct</span> <span class="n">ImageGrabberImpl</span><span class="p">;</span>
    <span class="n">ImageGrabberImpl</span><span class="o">*</span> <span class="n">impl_</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">PointCloud</span><span class="p">;</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">ImageGrabber</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ImageGrabberBase</span><span class="p">,</span> <span class="k">public</span> <span class="n">FileGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span>
  <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span>
                  <span class="kt">float</span> <span class="n">frames_per_second</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="kt">bool</span> <span class="n">repeat</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
                  <span class="kt">bool</span> <span class="n">pclzf_mode</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>

    <span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">depth_dir</span><span class="p">,</span>
                  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">rgb_dir</span><span class="p">,</span>
                  <span class="kt">float</span> <span class="n">frames_per_second</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="kt">bool</span> <span class="n">repeat</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>

    <span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">depth_image_files</span><span class="p">,</span>
                  <span class="kt">float</span> <span class="n">frames_per_second</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="kt">bool</span> <span class="n">repeat</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>

    <span class="cm">/** \brief Empty destructor */</span>
    <span class="o">~</span><span class="n">ImageGrabber</span> <span class="p">()</span> <span class="k">throw</span> <span class="p">()</span> <span class="p">{}</span>

    <span class="c1">// Inherited from FileGrabber</span>
    <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;</span>
    <span class="k">operator</span><span class="p">[]</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">idx</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>

    <span class="c1">// Inherited from FileGrabber</span>
    <span class="kt">size_t</span>
    <span class="nf">size</span> <span class="p">()</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>

    <span class="k">protected</span><span class="o">:</span>
    <span class="kt">void</span>
    <span class="n">publish</span> <span class="p">(</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PCLPointCloud2</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">,</span>
             <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector4f</span><span class="o">&amp;</span> <span class="n">origin</span><span class="p">,</span>
             <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="o">&amp;</span> <span class="n">orientation</span><span class="p">)</span> <span class="k">const</span> <span class="k">override</span><span class="p">;</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">signals2</span><span class="o">::</span><span class="n">signal</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="p">)</span><span class="o">&gt;*</span> <span class="n">signal_</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">dir</span><span class="p">,</span>
                                      <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span>
                                      <span class="kt">bool</span> <span class="n">repeat</span><span class="p">,</span>
                                      <span class="kt">bool</span> <span class="n">pclzf_mode</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="n">dir</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">pclzf_mode</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">signal_</span> <span class="o">=</span> <span class="n">createSignal</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">depth_dir</span><span class="p">,</span>
                                      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">rgb_dir</span><span class="p">,</span>
                                      <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span>
                                      <span class="kt">bool</span> <span class="n">repeat</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="n">depth_dir</span><span class="p">,</span> <span class="n">rgb_dir</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="n">repeat</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">signal_</span> <span class="o">=</span> <span class="n">createSignal</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">ImageGrabber</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">depth_image_files</span><span class="p">,</span>
                                      <span class="kt">float</span> <span class="n">frames_per_second</span><span class="p">,</span>
                                      <span class="kt">bool</span> <span class="n">repeat</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">ImageGrabberBase</span> <span class="p">(</span><span class="n">depth_image_files</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="p">,</span> <span class="n">repeat</span><span class="p">),</span> <span class="n">signal_</span> <span class="p">()</span>
  <span class="p">{</span>
    <span class="n">signal_</span> <span class="o">=</span> <span class="n">createSignal</span><span class="o">&lt;</span><span class="kt">void</span> <span class="p">(</span><span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="o">&gt;</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="k">operator</span><span class="p">[]</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">idx</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="n">pcl</span><span class="o">::</span><span class="n">PCLPointCloud2</span> <span class="n">blob</span><span class="p">;</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector4f</span> <span class="n">origin</span><span class="p">;</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span> <span class="n">orientation</span><span class="p">;</span>
    <span class="n">getCloudAt</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">orientation</span><span class="p">);</span>
    <span class="k">typename</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">Ptr</span> <span class="n">cloud</span> <span class="p">(</span><span class="k">new</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="p">());</span>
    <span class="n">pcl</span><span class="o">::</span><span class="n">fromPCLPointCloud2</span> <span class="p">(</span><span class="n">blob</span><span class="p">,</span> <span class="o">*</span><span class="n">cloud</span><span class="p">);</span>
    <span class="n">cloud</span><span class="o">-&gt;</span><span class="n">sensor_origin_</span> <span class="o">=</span> <span class="n">origin</span><span class="p">;</span>
    <span class="n">cloud</span><span class="o">-&gt;</span><span class="n">sensor_orientation_</span> <span class="o">=</span> <span class="n">orientation</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">cloud</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">///////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span> <span class="kt">size_t</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">size</span> <span class="p">()</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">numFrames</span> <span class="p">());</span>
  <span class="p">}</span>

  <span class="c1">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">PointT</span><span class="o">&gt;</span> <span class="kt">void</span>
  <span class="n">ImageGrabber</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">publish</span> <span class="p">(</span><span class="k">const</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PCLPointCloud2</span><span class="o">&amp;</span> <span class="n">blob</span><span class="p">,</span> <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector4f</span><span class="o">&amp;</span> <span class="n">origin</span><span class="p">,</span> <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Quaternionf</span><span class="o">&amp;</span> <span class="n">orientation</span><span class="p">)</span> <span class="k">const</span>
  <span class="p">{</span>
    <span class="k">typename</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;::</span><span class="n">Ptr</span> <span class="n">cloud</span> <span class="p">(</span><span class="k">new</span> <span class="n">pcl</span><span class="o">::</span><span class="n">PointCloud</span><span class="o">&lt;</span><span class="n">PointT</span><span class="o">&gt;</span> <span class="p">());</span>
    <span class="n">pcl</span><span class="o">::</span><span class="n">fromPCLPointCloud2</span> <span class="p">(</span><span class="n">blob</span><span class="p">,</span> <span class="o">*</span><span class="n">cloud</span><span class="p">);</span>
    <span class="n">cloud</span><span class="o">-&gt;</span><span class="n">sensor_origin_</span> <span class="o">=</span> <span class="n">origin</span><span class="p">;</span>
    <span class="n">cloud</span><span class="o">-&gt;</span><span class="n">sensor_orientation_</span> <span class="o">=</span> <span class="n">orientation</span><span class="p">;</span>

    <span class="n">signal_</span><span class="o">-&gt;</span><span class="k">operator</span> <span class="p">()</span> <span class="p">(</span><span class="n">cloud</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="file_pcl_io_image_ir.h.html" class="btn btn-neutral float-right" title="File image_ir.h" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="file_pcl_io_image_grabber.h.html" class="btn btn-neutral float-left" title="File image_grabber.h" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, open perception foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>